/// @spec_ref: 7.4
/// @point_id: 7_4_item
/// @case_id: 7_4_item__core_pass
/// @expect: pass
/// @boundary: core
/// @phase: sema
/// @diag_codes:
/// @diag_keywords:
// 泛型结构体 — 实例化、字段访问、泛型 impl 方法

struct Pair<T> {
    first: T,
    second: T,
}

impl<T> Pair<T> {
    func new(a: T, b: T) -> Pair<T> {
        return Pair { first: a, second: b }
    }

    func first(&self) -> T {
        return self.first
    }

    func second(&self) -> T {
        return self.second
    }
}

struct Box<T> {
    value: T,
}

func main() -> i32 {
    // 泛型结构体：i32 实例
    var p = Pair<i32>.new(3, 7)
    @assert(p.first() == 3, "7.4 generic struct: first")
    @assert(p.second() == 7, "7.4 generic struct: second")
    @assert(p.first() + p.second() == 10, "7.4 generic struct: sum")

    // 直接字段访问
    var b = Box<i32> { value: 42 }
    @assert(b.value == 42, "7.4 generic struct: Box value")

    return 0
}
