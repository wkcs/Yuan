/// @spec_ref: 8.3
/// @point_id: 8_3_item
/// @case_id: 8_3_item__core_pass
/// @expect: pass
/// @boundary: core
/// @phase: sema
/// @diag_codes:
/// @diag_keywords:
// 枚举方法 — impl 为枚举定义方法，验证方法返回值

enum Coin {
    Penny,
    Nickel,
    Dime,
    Quarter,
}

impl Coin {
    func value(&self) -> i32 {
        return match self {
            Coin.Penny   => 1,
            Coin.Nickel  => 5,
            Coin.Dime    => 10,
            Coin.Quarter => 25,
        }
    }

    func is_silver(&self) -> bool {
        return match self {
            Coin.Penny => false,
            _ => true,
        }
    }
}

func main() -> i32 {
    // 枚举方法返回值
    @assert(Coin.Penny.value() == 1, "8.3 enum method: Penny")
    @assert(Coin.Nickel.value() == 5, "8.3 enum method: Nickel")
    @assert(Coin.Dime.value() == 10, "8.3 enum method: Dime")
    @assert(Coin.Quarter.value() == 25, "8.3 enum method: Quarter")

    // 枚举方法返回 bool
    @assert(!Coin.Penny.is_silver(), "8.3 enum method: penny not silver")
    @assert(Coin.Dime.is_silver(), "8.3 enum method: dime is silver")

    // 枚举方法组合
    var total: i32 = Coin.Dime.value() + Coin.Nickel.value() + Coin.Penny.value()
    @assert(total == 16, "8.3 enum method: total value")

    return 0
}
