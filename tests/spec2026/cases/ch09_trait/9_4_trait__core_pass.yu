/// @spec_ref: 9.4
/// @point_id: 9_4_trait
/// @case_id: 9_4_trait__core_pass
/// @expect: pass
/// @boundary: core
/// @phase: sema
/// @diag_codes:
/// @diag_keywords:
// 常用内置 Trait — Clone 深拷贝、Eq 相等性比较

trait Clone {
    func clone(&self) -> Self
}

trait Eq {
    func eq(&self, other: &Self) -> bool
}

struct Vec2 {
    x: i32,
    y: i32,
}

impl Clone for Vec2 {
    func clone(&self) -> Self {
        return Vec2 { x: self.x, y: self.y }
    }
}

impl Eq for Vec2 {
    func eq(&self, other: &Vec2) -> bool {
        return self.x == other.x && self.y == other.y
    }
}

func main() -> i32 {
    var v = Vec2 { x: 3, y: 4 }

    // Clone：克隆值等于原值
    var c = v.clone()
    @assert(c.x == 3, "9.4 Clone: x field copied")
    @assert(c.y == 4, "9.4 Clone: y field copied")

    // Clone 独立性：修改克隆不影响原始
    c.x = 99
    @assert(v.x == 3, "9.4 Clone: original unchanged")

    // Eq：相等判断
    var a = Vec2 { x: 1, y: 2 }
    var b = Vec2 { x: 1, y: 2 }
    var d = Vec2 { x: 1, y: 9 }
    @assert(a.eq(&b), "9.4 Eq: equal vectors")
    @assert(!a.eq(&d), "9.4 Eq: different vectors")

    return 0
}
