/// \file test_std_collections_mapset.yu
/// \brief std.collections HashMap / HashSet 回归测试

const std = @import("std")
const collections = std.collections
const println = std.io.println

func main() -> i32 {
    var map: collections.HashMap<i32, i32> = collections.HashMap.new()
    map.insert(1, 1)
    map.insert(2, 2)
    map.insert(1, 10)
    println("[map] len = {}", map.len())

    var got_opt = map.get(1)
    var got: i32 = got_opt orelse -1
    println("[map] get(1) = {}", got)
    println("[map] contains_key(2) = {}", map.contains_key(2))
    println("[map] contains_key(999) = {}", map.contains_key(999))

    _ = map.remove(1)
    println("[map] len after remove = {}", map.len())
    println("[map] contains_key(1) = {}", map.contains_key(1))
    map.free()

    var str_map: collections.HashMap<str, i32> = collections.HashMap.new()
    str_map.insert("alpha", 7)
    str_map.insert("beta", 9)
    var str_val: i32 = str_map.get("alpha") orelse -1
    println("[map<str>] get(alpha) = {}", str_val)
    println("[map<str>] contains_key(beta) = {}", str_map.contains_key("beta"))
    str_map.free()

    var set: collections.HashSet<i32> = collections.HashSet.new()
    set.insert(10)
    set.insert(20)
    set.insert(10)
    println("[set] len = {}", set.len())
    println("[set] contains(10) = {}", set.contains(10))
    _ = set.remove(10)
    println("[set] len after remove = {}", set.len())
    set.free()

    return 0
}
