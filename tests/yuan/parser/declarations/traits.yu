// Trait 和 Impl 声明测试用例

// 基本 trait
trait Display {
    func to_string(&self) -> str
}

// 带默认实现的 trait
trait Default {
    func default() -> Self
    
    func new() -> Self {
        return Self.default()
    }
}

// 泛型 trait
trait Iterator<T> {
    func next(&mut self) -> ?T
    func has_next(&self) -> bool
}

// 带关联类型的 trait
trait Collect {
    type Item
    type Output
    
    func collect(&self) -> Self.Output
}

// 带约束的 trait
trait Clone where Self: Sized {
    func clone(&self) -> Self
}

// 继承 trait
trait Ord: Eq {
    func compare(&self, other: &Self) -> i32
}

trait Eq {
    func equals(&self, other: &Self) -> bool
}

// 可见性修饰符
pub trait PublicTrait {
    func method(&self) -> i32
}

// 复杂 trait
trait Complex<T, U> where T: Clone, U: Display {
    type Associated: Default
    
    func process(&self, input: T) -> U
    func convert(&self, value: Self.Associated) -> T
    
    func default_process(&self, input: T) -> str {
        return self.process(input).to_string()
    }
}

// Impl 块 - 固有实现
struct Point {
    x: f64,
    y: f64,
}

impl Point {
    func new(x: f64, y: f64) -> Point {
        return Point { x: x, y: y }
    }
    
    func origin() -> Point {
        return Point { x: 0.0, y: 0.0 }
    }
    
    func distance(&self, other: &Point) -> f64 {
        var dx = self.x - other.x
        var dy = self.y - other.y
        return (dx * dx + dy * dy).sqrt()
    }
}

// Impl 块 - trait 实现
impl Display for Point {
    func to_string(&self) -> str {
        return "Point(" + self.x.to_string() + ", " + self.y.to_string() + ")"
    }
}

impl Default for Point {
    func default() -> Point {
        return Point.origin()
    }
}

// 泛型 impl
impl<T> Display for Option<T> where T: Display {
    func to_string(&self) -> str {
        match self {
            Some(value) => "Some(" + value.to_string() + ")",
            None => "None",
        }
    }
}

// 条件 impl
impl<T> Clone for Vec<T> where T: Clone {
    func clone(&self) -> Vec<T> {
        var result = Vec.new()
        for item in self {
            result.push(item.clone())
        }
        return result
    }
}

// 类型别名
type Result<T> = Result<T, str>
type HashMap<K, V> = std.collections.HashMap<K, V>

pub type PublicAlias = i32
priv type PrivateAlias = str